/* Core Reset / Base */
* { box-sizing: border-box; }
html { font-size: 16px; }
body {
  margin: 0; font-family: system-ui,-apple-system,'Segoe UI',Roboto,Ubuntu,sans-serif; color: #111;
  background: linear-gradient(145deg,#0d1b2a,#1b263b 55%,#33415c); min-height: 100vh; display: flex; flex-direction: column;
}
:root {
  --accent: #31c48d;
  --accent-glow: #42f5a5;
  --danger: #e63946;
  --warning: #ffb703;
  --bg-panel: #1e2d3f;
  --bg-panel-alt: #24364a;
  --text-soft: #d8e1e8;
  --radius-sm: 6px; --radius-md: 12px; --radius-lg: 22px;
  --shadow-sm: 0 2px 4px -2px rgba(0,0,0,.4);
  --shadow-md: 0 6px 18px -6px rgba(0,0,0,.5);
  --shadow-glow: 0 0 0 2px rgba(66,245,165,.4),0 0 18px -2px rgba(66,245,165,.5);
}
.visually-hidden { position: absolute !important; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0 0 0 0); border: 0; }

.app-header, .app-footer {
  padding: .75rem 1rem; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;
  background: rgba(0,0,0,.35); backdrop-filter: blur(6px); color: var(--text-soft);
}
.app-header h1 { font-size: clamp(1.4rem,4vw,2rem); margin: .2rem 0; letter-spacing: .5px; }
.app-footer { font-size: .75rem; opacity: .8; }

.game-container { width: 100%; max-width: 1000px; margin: 0 auto; padding: 1rem 1.2rem 2.5rem; flex: 1; display: flex; flex-direction: column; gap: 1rem; }
.status-bar { display: grid; gap: .5rem; grid-template-columns: repeat(auto-fit,minmax(120px,1fr)); font-size: .8rem; }
.status-bar > div { background: var(--bg-panel); padding: .55rem .6rem; border-radius: var(--radius-md); color: var(--text-soft); box-shadow: var(--shadow-sm); display: flex; align-items: center; justify-content: space-between; }
.timer-wrapper { position: relative; height: .6rem; background: #102030; border-radius: 999px; overflow: hidden; grid-column: 1/-1; }
.timer-bar { height: 100%; width: 100%; background: linear-gradient(90deg,var(--accent),var(--accent-glow)); transition: width .2s linear; }

.prompt-area { display: flex; align-items: center; justify-content: center; min-height: 220px; }
.shape-card {
  width: clamp(220px,40vw,340px); aspect-ratio: 1; background: var(--bg-panel-alt); border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md); display: flex; align-items: center; justify-content: center; position: relative; padding: 1.2rem; cursor: pointer;
  transition: transform .4s cubic-bezier(.22,.8,.3,1), box-shadow .4s;
}
.shape-card:hover, .shape-card:focus { transform: translateY(-4px); box-shadow: var(--shadow-glow); outline: none; }
.shape-svg { width: 100%; height: 100%; }

.choices { display: grid; gap: .9rem; grid-template-columns: repeat(auto-fit,minmax(140px,1fr)); }
.choice-btn {
  border: none; padding: .85rem .9rem; font-size: .9rem; border-radius: var(--radius-md); font-weight: 600; letter-spacing: .5px; position: relative; isolation: isolate;
  background: linear-gradient(135deg,#274057,#33546d); color: var(--text-soft); box-shadow: var(--shadow-sm); cursor: pointer; display: flex; align-items: center; justify-content: center; min-height: 60px;
  transition: background .3s, transform .25s, box-shadow .3s;
}
.choice-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 3px; }
.choice-btn:hover { background: linear-gradient(135deg,#33546d,#406989); }
.choice-btn.correct { background: linear-gradient(135deg,#1b5e20,#2e7d32); box-shadow: 0 0 0 2px #2e7d32, var(--shadow-md); }
.choice-btn.wrong { background: linear-gradient(135deg,#8a1c23,#c62828); }
.choice-btn.locked { pointer-events: none; opacity: .65; }

.feedback { min-height: 2rem; font-weight: 600; text-align: center; color: var(--text-soft); letter-spacing: .5px; }
.controls { display: flex; gap: .8rem; justify-content: center; flex-wrap: wrap; margin-top: .5rem; }
.primary, .secondary, .ghost { border: none; font: inherit; cursor: pointer; padding: .7rem 1.1rem; border-radius: var(--radius-md); font-weight: 600; letter-spacing: .5px; }
.primary { background: var(--accent); color: #06251b; box-shadow: var(--shadow-sm); }
.primary:hover { background: var(--accent-glow); }
.secondary { background: #406989; color: var(--text-soft); }
.secondary:hover { background: #507aa0; }
.ghost { background: transparent; color: var(--text-soft); }
.ghost:hover { text-decoration: underline; }

.modal { width: min(650px,90vw); background: #132030; color: var(--text-soft); border: 1px solid #2a3d52; border-radius: var(--radius-lg); padding: 1rem 1.2rem 1.4rem; box-shadow: var(--shadow-md); }
.modal form { display: flex; flex-direction: column; gap: .9rem; }
.modal h2 { margin: .2rem 0 .4rem; font-size: 1.4rem; }
.modal ul { margin: .2rem 0 .2rem 1.1rem; padding: 0; display: grid; gap: .35rem; }

/* Animations */
@keyframes pop-in { 0% { transform: scale(.75) rotate(-6deg); opacity: 0; } 60% { transform: scale(1.05) rotate(2deg); opacity: 1; } 100% { transform: scale(1) rotate(0); } }
.shape-enter { animation: pop-in .55s cubic-bezier(.22,.8,.3,1); }
@keyframes pulse-correct { 0%,100% { filter: drop-shadow(0 0 0 rgba(255,255,255,0)); } 50% { filter: drop-shadow(0 0 12px rgba(66,245,165,.7)); } }
.correct { animation: pulse-correct 1.1s ease; }
@keyframes wobble-wrong { 0%,100% { transform: translateX(0); } 20% { transform: translateX(-8px); } 40% { transform: translateX(6px); } 60% { transform: translateX(-4px);} 80% { transform: translateX(2px);} }
.wrong { animation: wobble-wrong .5s ease; }

/* Responsive */
@media (max-width: 680px) {
  .status-bar { grid-template-columns: repeat(auto-fit,minmax(100px,1fr)); }
  .shape-card { width: clamp(200px,70vw,320px); }
  .choice-btn { min-height: 56px; font-size: .85rem; }
}
@media (max-width: 460px) {
  .app-header h1 { font-size: 1.25rem; }
  .game-container { padding: .8rem .75rem 2.2rem; }
  .choice-btn { padding: .7rem .6rem; }
}
